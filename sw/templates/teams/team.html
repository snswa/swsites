{% extends "teams/base.html" %}

{% load breadcrumbs feature_tag %}
{% load group_tags %}
{% load pagination_tags %}

{% block head_title %}{{ group.name }}{% endblock %}

{% block body_class %}{{ block.super }} team-{{ group.slug }}{% endblock %}

{% block breadcrumbs %}
    {{ block.super }}
    {% for parent in group.parents %}
        {% breadcrumb_url parent.name teams_team slug=parent.slug %}
    {% endfor %}
    {% breadcrumb group.name "./" %}
{% endblock %}


{% block body %}
    {% if group.is_private and not is_team_member %}
        <p>This team is private.</p>
    {% else %}
        {% if team_wiki_index_page %}
            {% with team_wiki_index_page.current as rev %}
                {% include "wakawaka/page_content.html" %}
            {% endwith %}
        {% endif %}

        <h1>Recent Activity</h1>

        {% autopaginate team_actions %}

        <ul class="stream">
            {% for action in team_actions %}
                <li class="event">
                    {% include "activity/action.html" %}
                </li>
            {% endfor %}
        </ul>

        {% paginate %}
    {% endif %}
{% endblock %}

{% block sidebar_sections %}
    {% if is_team_member or not group.is_private  %}

        {% include "sidebars/teamjoinleave.html" %}

        <div class="section">
            <h1>More Teams</h1>

            <ul>
                <li><a href="{% url teams_index %}">« All Teams</a></li>
                {% for parent in group.parents %}
                    <li><a href="{% url teams_team slug=parent.slug %}">« {{ parent.name }}</a></li>
                {% endfor %}
                {% for child in group.children %}
                    <li><a href="{% url teams_team slug=child.slug %}">{{ child.name }} »</a></li>
                {% endfor %}
            </ul>
        </div>

        {% include "sidebars/wikicommon.html" %}

        <div class="section">
            <h1>Members</h1>

            {% with group.members.all as members %}
                <ul>
                    {% for user in members %}
                        <li><a href="{{ user.get_absolute_url }}">{{ user.get_profile }}</a></li>
                    {% endfor %}
                </ul>
            {% endwith %}
        </div>

    {% endif %}
{% endblock %}
