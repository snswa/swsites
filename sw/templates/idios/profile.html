{% extends "idios/base.html" %}

{% load breadcrumbs feature_tag %}
{% load i18n %}
{% load uni_form_tags %}

{% block head_title %}{% trans "Profile for" %} {{ page_user.get_profile }}{% endblock %}

{% block breadcrumbs %}
    {{ block.super }}
    {% if is_me %}
        {% breadcrumb 'Your Profile' %}
    {% else %}
        {% breadcrumb page_user.get_profile %}
    {% endif %}
{% endblock %}

{% block body %}
    <div class="prefix_2 grid_8 suffix_2">
        <div class="vcard">
            {# TODO: needs fn (full name) class on some element that contains full name #}

            {% if is_me %}

                {% feature breadcrumbs %}{% disabled %}
                    <h1>{% trans "Your Profile" %}</h1>
                {% endfeature %}

                <ul>
                    <li><a href="{% url profile_edit %}">{% trans "Edit profile" %}</a></li>
                    <li><a href="{% url account_email %}">{% trans "Manage email addresses" %}</a></li>
                    <li><a href="{% url socialaccount_connections %}">{% trans "Manage third-party logins" %}</a></li>
                </ul>

                <div class="profile_info">
                    <p><b>{% trans "Username" %}</b>: {{ page_user.username }}</p>

                    {% with page_user.get_profile as p %}
                        {% if p.preferred_name %}
                            <p><b>{% trans "Preferred Name" %}</b>: {{ p.preferred_name }}</p>
                        {% endif %}

                        {% if p.first_name or p.last_name %}
                            <p><b>{% trans "Full Name" %}</b>: {{ p.first_name }} {{p.last_name}}</p>
                        {% endif %}

                        {% if p.zip_code %}
                            <p><b>{% trans "ZIP Code" %}</b>: {{ p.zip_code }}</p>
                        {% endif %}

                        {% if p.mailing_address %}
                            <p><b>{% trans "Mailing Address" %}</b>:<br /><pre>{{ p.mailing_address }}</pre></p>
                        {% endif %}

                        {% if p.phone_number %}
                            <p><b>{% trans "Phone Number" %}</b>: {{ p.phone_number }}</p>
                        {% endif %}

                        {% if p.yahoo_messenger %}
                            <p><b>{% trans "Yahoo! Messenger" %}</b>: {{ p.yahoo_messenger }}</p>
                        {% endif %}

                        {% if p.aim %}
                            <p><b>{% trans "AIM" %}</b>: {{ p.aim }}</p>
                        {% endif %}

                        {% if p.msn_messenger %}
                            <p><b>{% trans "MSN Messenger" %}</b>: {{ p.msn_messenger }}</p>
                        {% endif %}

                        {% if p.skype %}
                            <p><b>{% trans "Skype" %}</b>: {{ p.skype }}</p>
                        {% endif %}

                        {% if p.preferred_contact_methods %}
                            <p><b>{% trans "Preferred Contact Methods" %}</b>: {{ p.preferred_contact_methods }}</p>
                        {% endif %}

                        {% if p.bio %}
                            <p><b>{% trans "Bio" %}</b>: {{ p.bio }}</p>
                        {% endif %}
                    {% endwith %}
                </div>

            {% else %}

                {% feature breadcrumbs %}{% disabled %}
                    <h1>{% trans "Profile for" %} {{ page_user.get_profile }}</h1>
                {% endfeature %}

                <p>(Viewing others' profiles is not yet enabled.)</p>

            {% endif %}

        </div>
    </div>
{% endblock %}
